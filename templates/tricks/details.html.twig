{% extends 'base.html.twig' %}

{% block title %}{% endblock %}
{% block body %}


	<br>

	<section
		class="relative">
		<!-- Hero background -->
		<div class="absolute inset-0">
			<img src="{{ asset('assets/images/image-cover.jpg') }}" alt="Hero" class="w-full h-[400px] sm:h-[500px] md:h-[600px] object-cover brightness-75">
			<div class="absolute inset-0 bg-linear-to-b from-transparent to-white/80"></div>
		</div>

		<!-- Centered card -->
		<div class="relative z-10 container mx-auto px-4 sm:px-6 md:px-12 lg:px-20 xl:px-32 pt-20">
			<div class="bg-white rounded-xl shadow-lg max-w-4xl mx-auto overflow-hidden">

				<div class="px-6 md:px-[93px]
																																																																																																																																																																																																																																																																																																																																		bg-[url('{{ asset('uploads/tricks/' ~ trick.featuredImage) }}')]
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																bg-cover bg-center bg-no-repeat min-h-[70vh] md:min-h-[60vh]
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																flex items-center justify-center">

					<div class="bg-[#00214D]/50 backdrop-blur-sm p-6 md:p-10 rounded-xl max-w-xl text-center">
						<h1 class="text-white font-bold uppercase mb-4" style="font-size: 48px">
							{{ trick.title }}
						</h1>
					</div>
				</div>


				<div
					class="w-full overflow-hidden relative group p-6">

					<!-- Conteneur visible -->
					<div id="marquee-container" class="overflow-hidden mx-auto max-w-[1100px]">
						<div id="marquee" class="flex gap-6 transition-transform duration-300">

							{% for item in media %}
								<div class="min-w-[160px] aspect-video bg-white rounded-lg shadow overflow-hidden">
									{% if item.getType() == 'video' %}
										<iframe src="{{ item.content }}" class="w-full h-full" allowfullscreen></iframe>
									{% else %}
										<img src="{{ asset('uploads/tricks/' ~ item.content) }}" class="w-full h-full object-cover">
									{% endif %}
								</div>
							{% endfor %}

						</div>
					</div>


					<!-- Flèche gauche -->
					<button id="prev" class="absolute top-1/2 left-2 -translate-y-1/4 w-10 h-10 rounded-full
																			bg-white/80 text-2xl shadow-md flex items-center justify-center opacity-0 -translate-x-1/2 group-hover:opacity-100 group-hover:translate-x-0
																			transition duration-300 hover:bg-white hover:scale-110 z-20">
						‹
					</button>

					<!-- Flèche droite -->
					<button id="next" class="absolute top-1/2 right-2 -translate-y-1/4 w-10 h-10 rounded-full
																			bg-white/80 text-2xl shadow-md flex items-center justify-center
																			opacity-0 -translate-x-1/2 group-hover:opacity-100 group-hover:translate-x-0
																			transition duration-300 hover:bg-white hover:scale-110 z-20">
						›
					</button>

				</div>

				<div class=" px-4 md:px-8 lg:px-16 ">

					<p>{{ trick.content }}</p>


					<div class="flex items-center flex-wrap w-full border border-solid  dark:border-dark_border md:px-14 px-6 md:mt-14 mt-6 rounded-22">
						<div data-aos="fade-up" data-aos-delay="0" data-aos-duration="1000" class="flex items-center lg:gap-0 gap-4 flex-wrap justify-between w-full md:py-12 py-5 border-b border-solid dark:border-dark_border last:border-b-0 aos-init aos-animate">
							<div>

								<h6 class="text-[26px] leading-[2.1rem] font-bold text-secondary dark:text-white max-w-286">
									{{ trick.category ? trick.category.name : 'Aucune catégorie' }}
								</h6>
							</div>
							<div class="flex items-center flex-wrap gap-30">


								<div>
									<p class="text-lg font-normal text-SlateBlueText dark:text-opacity-80">Date de création</p>
									<p class="text-lg font-medium text-secondary dark:text-white"></p>
									<p class="text-lg font-medium text-secondary dark:text-white">
										{{ trick.createdAt|date('d/m/Y') }}
									</p>
								</p>
							</div>
						</div>
						<div>
							<div>
								<p class="text-lg font-normal text-SlateBlueText dark:text-opacity-80">Date de modification</p>
								<p>Modifié le :
									{{ trick.updatedAt ? trick.updatedAt|date('d/m/Y') : 'Jamais modifié' }}</p>


							</div>
						</div>
					</div>


				</div>
				<div class="mt-12">
					<h2 class="text-2xl font-bold mb-6">
						Commentaires ({{ trick.comments|length }})
					</h2>

					<div id="comments-container" class="space-y-6">
						{% include '_partials/comments.html.twig' with { comments: comments } %}
					</div>

					{% if trick.comments|length > 5 %}
						<button id="load-more-comments" data-offset="0" data-url="{{ path('app_tricks_comments_load', { slug: trick.slug }) }}" class="mt-6 px-6 py-2 bg-secondary text-white rounded-lg">
							Charger plus de commentaires
						</button>
					{% endif %}
				</div>


			</div>


		</div>


		<div class="h-20"></div>
	</section>


{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{ asset('js/loadMoreComments.js') }}"></script>
	<script src="{{ asset('js/marquee.js') }}"></script>

{% endblock %}
